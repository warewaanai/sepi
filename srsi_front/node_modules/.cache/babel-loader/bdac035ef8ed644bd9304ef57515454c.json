{"ast":null,"code":"import resultID from'./resultid';import fetchResults from'./fetch';var getResults=function getResults(contest,level,county){var scoreIndex=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;/*if(window.sessionStorage.getItem(resultID(contest, level)) == null\n    || window.sessionStorage.getItem(resultID(contest, level)).length == 0){\n        fetchResults(contest, level);\n    }\n\n    const results = JSON.parse(window.sessionStorage.getItem(resultID(contest, level)));*/return fetchResults(contest,level).then(function(results){var count=0,lastScore=-1,before=0;if(county=='general')return{\"head\":[\"Index\"].concat(results[\"head\"]),\"body\":results[\"body\"].map(function(result){if(lastScore!=result[result.length-scoreIndex])before=count;count+=1;lastScore=result[result.length-scoreIndex];return[before+1].concat(result);})};//console.log(results);\nreturn{\"head\":[\"Index\"].concat(results[\"head\"]),\"body\":results[\"body\"].filter(function(result){return result[0]==county;}).map(function(result){return[++count].concat(result);})};});};export default getResults;","map":{"version":3,"sources":["/home/bodo/sepi2/sepi/srsi_front/src/components/scoreboard/Utilities/getresults.js"],"names":["resultID","fetchResults","getResults","contest","level","county","scoreIndex","then","results","count","lastScore","before","concat","map","result","length","filter"],"mappings":"AAAA,MAAOA,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,SAAzB,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,OAAD,CAAUC,KAAV,CAAiBC,MAAjB,CAA0C,IAAjBC,CAAAA,UAAiB,2DAAN,CAAM,CAEzD;AACJ;AACA;AACA;AACA;AACA,0FACI,MAAOL,CAAAA,YAAY,CAACE,OAAD,CAAUC,KAAV,CAAZ,CAA6BG,IAA7B,CACH,SAAAC,OAAO,CAAG,CACV,GAAIC,CAAAA,KAAK,CAAG,CAAZ,CAAeC,SAAS,CAAG,CAAC,CAA5B,CAA+BC,MAAM,CAAG,CAAxC,CAEA,GAAIN,MAAM,EAAI,SAAd,CACI,MAAO,CACP,OAAQ,CAAC,OAAD,EAAUO,MAAV,CAAiBJ,OAAO,CAAC,MAAD,CAAxB,CADD,CAEP,OAAQA,OAAO,CAAC,MAAD,CAAP,CAAgBK,GAAhB,CACJ,SAAAC,MAAM,CAAG,CACL,GAAGJ,SAAS,EAAII,MAAM,CAACA,MAAM,CAACC,MAAP,CAAcT,UAAf,CAAtB,CACIK,MAAM,CAACF,KAAP,CACJA,KAAK,EAAE,CAAP,CACAC,SAAS,CAAGI,MAAM,CAACA,MAAM,CAACC,MAAP,CAAcT,UAAf,CAAlB,CACA,MAAO,CAACK,MAAM,CAAC,CAAR,EAAWC,MAAX,CAAkBE,MAAlB,CAAP,CACH,CAPG,CAFD,CAAP,CAaJ;AACA,MAAO,CACH,OAAQ,CAAC,OAAD,EAAUF,MAAV,CAAiBJ,OAAO,CAAC,MAAD,CAAxB,CADL,CAEH,OAAQA,OAAO,CAAC,MAAD,CAAP,CAAgBQ,MAAhB,CAAuB,SAAAF,MAAM,QAAIA,CAAAA,MAAM,CAAC,CAAD,CAAN,EAAaT,MAAjB,EAA7B,EAAsDQ,GAAtD,CAA0D,SAAAC,MAAM,QAAI,CAAC,EAAEL,KAAH,EAAUG,MAAV,CAAiBE,MAAjB,CAAJ,EAAhE,CAFL,CAAP,CAIC,CAvBE,CAAP,CAwBH,CAhCD,CAkCA,cAAeZ,CAAAA,UAAf","sourcesContent":["import resultID from './resultid'\nimport fetchResults from './fetch'\n\nconst getResults = (contest, level, county, scoreIndex=1) => {\n    \n    /*if(window.sessionStorage.getItem(resultID(contest, level)) == null\n    || window.sessionStorage.getItem(resultID(contest, level)).length == 0){\n        fetchResults(contest, level);\n    }\n\n    const results = JSON.parse(window.sessionStorage.getItem(resultID(contest, level)));*/\n    return fetchResults(contest, level).then(\n        results =>{\n        let count = 0, lastScore = -1, before = 0;\n\n        if (county == 'general') \n            return {\n            \"head\": [\"Index\"].concat(results[\"head\"]),\n            \"body\": results[\"body\"].map(\n                result =>{\n                    if(lastScore != result[result.length-scoreIndex])\n                        before=count;\n                    count+=1;\n                    lastScore = result[result.length-scoreIndex];\n                    return [before+1].concat(result);\n                }\n            )\n            };\n    \n        //console.log(results);\n        return {\n            \"head\": [\"Index\"].concat(results[\"head\"]),\n            \"body\": results[\"body\"].filter(result => result[0] == county).map(result => [++count].concat(result))\n            };\n        });\n}\n\nexport default getResults;"]},"metadata":{},"sourceType":"module"}